
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi LLM ChatGpti</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: #E6E6FA;
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            max-width: 1200px;
            margin: 40px auto;
            background: #F5F5FA;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        /* Left side: Response */
        .output {
            flex: 1;
            min-width: 300px;
            background: #C9B6FF;
            padding: 25px;
            border-right: 2px solid #eee;
        }

        .output h3 {
            margin-top: 0;
        }

        .response-box {
            min-height: 300px;
            padding: 15px;
            background: #E7E5FA;
            border-radius: 8px;
            border: 1px solid #ddd;
            white-space: pre-wrap;
            overflow-y: auto;
        }

        /* Right side: Form */
        .form-container {
            flex: 1;
            min-width: 300px;
            padding: 25px;
        }

        label {
            font-weight: bold;
            display: block;
            margin-top: 15px;
        }

        select, textarea, button {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            font-size: 16px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        textarea {
            resize: none;
            min-height: 100px;
        }

        button {
            background-color: #C9B6FF;
            color: #fff;
            border: none;
            cursor: pointer;
            margin-top: 20px;
        }

        button:hover {
            background-color: #5A5A8C;
        }

        @media(max-width: 768px){
            .container {
                flex-direction: column;
            }

            .output {
                border-right: none;
                border-bottom: 2px solid #eee;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <!-- Left: Response -->
    <div class="output">
        <h3>ChatGptiðŸ¤–</h3>
        <div class="response-box" id="responseBox">Waiting for response...</div>
    </div>

    <!-- Right: Form -->
    <div class="form-container">
        <h3>Generate Text</h3>

        <label>Choose Provider</label>
        <select id="provider" onchange="updateModels()">
            <option value="openai">OpenAI</option>
            <option value="gemini">Gemini</option>
            <option value="groq">Groq</option>
            <option value="hf">HuggingFace</option>
            <option value="mistral">Mistral</option>
        </select>

        <label>Choose Model</label>
        <select id="model"></select>

        <label>System Prompt</label>
        <textarea id="system_prompt" placeholder="Optional system prompt..."></textarea>

        <label>User Prompt</label>
        <textarea id="prompt" placeholder="Type your prompt here..."></textarea>

        <button onclick="generate()">Generate</button>
    </div>
</div>

<script>
    // Models by provider
    const models = {
            openai: ["gpt-4.1-mini", "gpt-4.1", "gpt-3.5-turbo"],
            gemini: ["gemini-2.5-flash-lite", "gemini-2.0-flash"],
            groq: ["llama-3.3-70b-versatile", "mixtral-3b"],
            hf: ["gpt-neo-2.7B", "llama-2-7b"],
            mistral: ["mistral-small", "mistral-large"]
    };

    // Populate model dropdown
    function updateModels() {
        const provider = document.getElementById("provider").value;
        const modelSelect = document.getElementById("model");
        modelSelect.innerHTML = "";
        models[provider].forEach(model => {
            const option = document.createElement("option");
            option.value = model;
            option.text = model;
            modelSelect.appendChild(option);
        });
    }

    // Initialize model dropdown
    updateModels();

    // Generate text
    async function generate() {
        const provider = document.getElementById("provider").value;
        const model = document.getElementById("model").value;
        const system_prompt = document.getElementById("system_prompt").value;
        const prompt = document.getElementById("prompt").value;
        const output = document.getElementById("responseBox");

        output.innerText = "Generating...";

        try {
            const res = await fetch("http://127.0.0.1:8000/generate", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({provider, model, system_prompt, prompt})
            });

            const data = await res.json();
            if(data.response){
                output.innerText = data.response;
            } else {
                output.innerText = "Error: " + JSON.stringify(data);
            }
        } catch(err){
            output.innerText = "Request failed: " + err.message;
        }
    }
</script>

</body>
</html>
